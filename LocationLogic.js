var x;function aa(e,t,a,n,s,i,o){let d=0,l=0,r=0,c=0;d=Math.min(e.aa,e.y),l=Math.min(e.ab,e.z),r=Math.max(e.aa,e.y),c=Math.max(e.ab,e.z);let p=document.createElement("div");p.setAttribute("class",t),p.setAttribute("data-zoneId",s),p.style.left=d+"%",p.style.top=l+"%",p.style.width=r-d+"%",p.style.height=c-l+"%",i/100*o<1?p.classList.add("low-spawn"):i/100*o<2?p.classList.add("medium-spawn"):p.classList.add("high-spawn");let h=document.createTextNode(o);return p.appendChild(h),p}function ab(e){let t=((e-100)*.15).toFixed(2),a="";return x.t.forEach(e=>{e.v==t&&(a=e.u)}),a}function ag(e){let t=((e-88)*.2).toFixed(2),a="";return x.q.forEach(e=>{e.s==t&&(a=e.r)}),a}function ac(e){let t=ad(e);let a="spawn-zone",n=document.getElementById("spawn-map"),s=document.getElementById("spawn-details");for(var i=n.getElementsByClassName(a);i[0];)i[0].parentNode.removeChild(i[0]);for(var i=s.getElementsByClassName(a);i[0];)i[0].parentNode.removeChild(i[0]);if(t.length<1)return;let o=n.clientWidth,d=n.clientHeight;t.forEach(t=>{let i=document.createElement("div");i.setAttribute("data-zoneId",t),i.setAttribute("class",a);let l=0,r=1==x.a[t].b,c=x.a[t].bb;x.a[t].c.forEach(t=>{let a=document.createElement("div");a.setAttribute("class","spawn-entry");let n=!1,s=document.createElement("div");s.setAttribute("class","npcs-to-spawn"),s.classList.add("disabled"),t.g.forEach(a=>{let i=a.h,o=a.i,d=ag(o),l=document.createElement("div");l.setAttribute("class","npc-to-spawn"),l.textContent+=i.toFixed(1)+"% "+d,e==o&&(n=!0,l.classList.add("highlight")),t.j.forEach(t=>{o==t.m&&t.n.forEach(t=>{if(e==t.p){n=!0,l.classList.add("highlight");let a=document.createElement("div");a.classList.add("remap-1"),a.textContent+=" (1) => "+t.o.toFixed(1)+"% "+ag(t.p),l.appendChild(a)}})}),x.hasOwnProperty("ah")&&x.ah.forEach(t=>{o==t.m&&t.n.forEach(t=>{if(e==t.p){n=!0,l.classList.add("highlight");let a=document.createElement("div");a.classList.add("remap-2"),a.textContent+=" (2) => "+t.o.toFixed(1)+"% "+ag(t.p),l.appendChild(a)}})}),s.appendChild(l)});let o=ab(t.u),d=t.f,r=document.createElement("div");r.setAttribute("class","spawn-entry-name"),r.textContent+=d.toFixed(1)+"% "+o,a.appendChild(r),a.appendChild(s),n&&(r.classList.add("highlight"),d>l&&(l=d)),r.addEventListener("click",function(e){var t=e.target.parentNode.getElementsByClassName("npcs-to-spawn");for(let a of t)a.classList.contains("disabled")?a.classList.remove("disabled"):a.classList.add("disabled")}),i.appendChild(a)}),i.classList.add("disabled"),s.appendChild(i),x.a[t].w.forEach(e=>{let i=aa(e,a,o,d,t,l,c);r&&i.classList.add("cave"),i.addEventListener("click",function(e){for(let t of n.children)t.hasAttribute("data-zoneId")&&(t.getAttribute("data-zoneId")==e.target.getAttribute("data-zoneId")?t.classList.add("highlight"):t.classList.remove("highlight"));for(let a of s.children)a.hasAttribute("data-zoneId")&&(a.getAttribute("data-zoneId")==e.target.getAttribute("data-zoneId")?a.classList.remove("disabled"):a.classList.add("disabled"));let i=parseFloat(e.target.style.left)+parseFloat(e.target.style.width)/2,o=parseFloat(e.target.style.top)+parseFloat(e.target.style.height)/2;var d=n.getElementsByClassName("spawn-zone");for(let l of d){if(l==e.target)continue;let r=parseFloat(l.style.left),c=parseFloat(l.style.width),p=parseFloat(l.style.top),h=parseFloat(l.style.height);i>r&&i<r+c&&o>p&&o<p+h&&console.log("found")}}),n.appendChild(i)})})}function ad(e){let t=[];t.push(parseInt(e)),x.hasOwnProperty("ah")&&x.ah.forEach(a=>{let n=a.m;a.n.forEach(a=>{e==a.p&&t.push(n)})});let a=[],n=0;return x.a.forEach(e=>{e.c.forEach(e=>{e.g.forEach(e=>{t.includes(e.i)&&-1===a.indexOf(n)&&a.push(n)}),e.j.forEach(e=>{e.n.forEach(e=>{t.includes(e.p)&&-1===a.indexOf(n)&&a.push(n)})})}),n++}),a}function ae(){let e=document.getElementById("spawn-data");x=JSON.parse(e.textContent);let t=document.getElementById("dino-list");x.q.forEach(e=>{let a=parseInt(e.s/.2+88);if(ad(a).length>0){let n=document.createElement("option"),s=document.createTextNode(e.r);n.setAttribute("data-dinoId",a),n.appendChild(s),t.appendChild(n)}});let a=Array.from(t.children).sort((e,t)=>e.textContent.toLowerCase().localeCompare(t.textContent.toLowerCase()));for(;t.children[0];)t.removeChild(t.children[0]);for(let n of a)t.appendChild(n);t.addEventListener("change",function(e){ac(this.options[this.selectedIndex].getAttribute("data-dinoId"))});let s=document.getElementById("dino-search");s.addEventListener("keyup",function(e){let a=t.children.length,n=0,s=0;for(let i of t.options)i.textContent.toLowerCase().match(this.value.toLowerCase())?(i.removeAttribute("disabled"),i.style.display="block",s=i.getAttribute("data-dinoId")):(i.setAttribute("disabled","disabled"),i.style.display="none",n++);n+1==a&&ac(s)})}function af(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}af(function(){ae()});
